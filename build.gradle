/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'java'
    id 'maven-publish'
    id 'war'
    id "eclipse"
    id "eclipse-wtp"
}

repositories {
    flatDir { dirs "webapp/WEB-INF/lib" }
    mavenLocal()
    maven {
        url = uri('http://repo.enonic.com/public')
    }

    maven {
        url = uri('https://repo.maven.apache.org/maven2/')
    }
}

dependencies {
    def tomcatVersion = '7.0.72'
    def slf4jVersion = "1.7.2"
    def springVersion = "4.1.2.RELEASE"
    compile "org.slf4j:jcl-over-slf4j:$slf4jVersion"
    compile "org.slf4j:jul-to-slf4j:$slf4jVersion"
    compile "org.slf4j:slf4j-api:$slf4jVersion"
    compile 'ch.qos.logback:logback-classic:1.0.13'
    implementation "org.springframework:spring-test:$springVersion"
    implementation 'commons-lang:commons-lang:2.5'
    implementation 'commons-beanutils:commons-beanutils:1.8.3'
    implementation 'commons-io:commons-io:2.4'
    implementation 'commons-net:commons-net:3.6'
    implementation 'commons-dbcp:commons-dbcp:1.2.2'
    implementation 'commons-codec:commons-codec:1.9'
    implementation 'commons-digester:commons-digester:2.0'
    implementation 'commons-fileupload:commons-fileupload:1.3.1'
    implementation 'commons-logging:commons-logging:1.2'
    implementation 'commons-pool:commons-pool:1.3'
    implementation 'io.projectreactor:reactor-core:3.3.0.RELEASE'
    implementation "org.springframework:spring-core:$springVersion"
    implementation "org.springframework:spring-beans:$springVersion"
    implementation "org.springframework:spring-web:$springVersion"
    implementation "org.springframework:spring-webmvc:$springVersion"
    implementation "org.springframework:spring-oxm:$springVersion"
    implementation "org.springframework:spring-orm:$springVersion"
    implementation "org.springframework:spring-context:$springVersion"
    implementation "org.springframework:spring-context-support:$springVersion"
    implementation "org.springframework:spring-tx:$springVersion"
    implementation "org.springframework:spring-aop:$springVersion"
    implementation "org.springframework:spring-expression:$springVersion"
    implementation 'org.springframework.security:spring-security-web:3.2.5.RELEASE'
    implementation 'org.springframework.security:spring-security-core:3.2.5.RELEASE'
    implementation 'org.springframework.security:spring-security-config:3.2.5.RELEASE'
    implementation 'org.springframework.security:spring-security-taglibs:3.2.5.RELEASE'
    implementation "org.springframework:spring-jdbc:$springVersion"
    implementation 'org.hibernate.common:hibernate-commons-annotations:4.0.5.Final'
    implementation 'org.hibernate:hibernate-core:4.3.7.Final'
    implementation 'org.hibernate:hibernate-validator:5.1.3.Final'
    implementation 'org.hibernate.javax.persistence:hibernate-jpa-2.1-api:1.0.0.Final'
    implementation 'org.apache.httpcomponents:httpclient:4.5.3'
    implementation 'org.apache.httpcomponents:httpcore:4.4.6'
    implementation 'javax.servlet:jstl:1.2'
    implementation 'nl.captcha:simplecaptcha:1.2.1'
    implementation 'org.imgscalr:imgscalr-lib:4.2'
    implementation 'ch.qos.logback:logback-classic:1.2.3'
    implementation 'org.quartz-scheduler:quartz:2.2.1'
    implementation 'javax.validation:validation-api:1.1.0.Final'
    implementation 'org.apache.poi:poi:3.15'
    implementation 'org.apache.poi:poi-ooxml:3.15'
    implementation 'com.fasterxml.jackson.core:jackson-core:2.4.2'
    implementation 'com.fasterxml.jackson.core:jackson-annotations:2.4.2'
    implementation 'com.fasterxml.jackson.core:jackson-databind:2.4.2'
    implementation 'mysql:mysql-connector-java:5.1.32'
    implementation 'org.apache.tiles:tiles-api:3.0.5'
    implementation 'org.apache.tiles:tiles-core:3.0.5'
    implementation 'org.apache.tiles:tiles-jsp:3.0.5'
    implementation 'org.apache.tiles:tiles-servlet:3.0.5'
    implementation 'org.apache.tiles:tiles-template:3.0.5'
    implementation 'org.modelmapper:modelmapper:2.1.1'
    implementation 'com.google.guava:guava:26.0-jre'
    implementation 'org.json:json:20190722'
    implementation 'org.codehaus.janino:janino:2.7.8'
    implementation 'org.slf4j:slf4j-api:1.7.25'
    implementation 'org.slf4j:slf4j-log4j12:1.7.25'
    implementation 'com.google.code.gson:gson:2.2.4'
    implementation 'org.webjars:mustachejs:2.2.1'
    implementation 'commons-httpclient:commons-httpclient:3.1'
    implementation 'org.apache.clerezza.ext:org.json.simple:0.4'
    implementation 'com.opencsv:opencsv:5.4'
    testImplementation 'junit:junit:4.11'
    testImplementation 'org.mockito:mockito-core:1.9.5'
    testImplementation 'org.powermock:powermock-module-junit4:1.5.1'
    testImplementation 'org.powermock:powermock-api-mockito:1.5.1'
    compileOnly 'org.projectlombok:lombok:1.18.12'
    annotationProcessor 'org.projectlombok:lombok:1.18.12'
    providedCompile 'javax.servlet:javax.servlet-api:3.1.0'
    providedCompile 'javax.servlet:jsp-api:2.0'
    providedCompile "org.apache.tomcat:tomcat-servlet-api:$tomcatVersion"
    implementation fileTree(dir: "src/main/webapp/WEB-INF/lib", include: '*.jar')
}

group = 'com.castis'
version = '0.3.3.QR2'
description = 'PVS Maven Webapp'
java.sourceCompatibility = JavaVersion.VERSION_1_8

sourceCompatibility = 1.8
targetCompatibility = 1.8

publishing {
    publications {
        maven(MavenPublication) {
            from(components.java)
        }
    }
}

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}

sourceSets {
    main.java.srcDirs=['src/main/java']
    main.resources.srcDirs=['src/main/resources', 'src/main/resources-' + target]
}

war {
    //archiveName 'PVS_$version.war'
    from 'webapp' // adds a file-set to the root of the archive
}

// JAVA 컴파일시 인코딩 설정
[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'
